define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(n,t,e){function r(n,t){for(;(n=n[t])&&1!==n.nodeType;);return n}var i=/^(?:parents|prev(?:Until|All))/,u={children:!0,contents:!0,next:!0,prev:!0};return n.extend({dir:function(t,e,r){for(var i=[],u=void 0!==r;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(u&&n(t).is(r))break;i.push(t)}return i},sibling:function(n,t){for(var e=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}}),n.fn.extend({has:function(t){var e=n(t,this),r=e.length;return this.filter(function(){for(var t=0;r>t;t++)if(n.contains(this,e[t]))return!0})},closest:function(t,r){for(var i,u=0,o=this.length,s=[],l=e.test(t)||"string"!=typeof t?n(t,r||this.context):0;o>u;u++)for(i=this[u];i&&i!==r;i=i.parentNode)if(i.nodeType<11&&(l?l.index(i)>-1:1===i.nodeType&&n.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?n.unique(s):s)},index:function(e){return e?"string"==typeof e?t.call(n(e),this[0]):t.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(n.unique(n.merge(this.get(),n(t,e))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),n.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return n.dir(t,"parentNode")},parentsUntil:function(t,e,r){return n.dir(t,"parentNode",r)},next:function(n){return r(n,"nextSibling")},prev:function(n){return r(n,"previousSibling")},nextAll:function(t){return n.dir(t,"nextSibling")},prevAll:function(t){return n.dir(t,"previousSibling")},nextUntil:function(t,e,r){return n.dir(t,"nextSibling",r)},prevUntil:function(t,e,r){return n.dir(t,"previousSibling",r)},siblings:function(t){return n.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return n.sibling(t.firstChild)},contents:function(t){return t.contentDocument||n.merge([],t.childNodes)}},function(t,e){n.fn[t]=function(r,o){var s=n.map(this,e,r);return"Until"!==t.slice(-5)&&(o=r),o&&"string"==typeof o&&(s=n.filter(o,s)),this.length>1&&(u[t]||n.unique(s),i.test(t)&&s.reverse()),this.pushStack(s)}}),n});